# 価値のある単体テストを作る章
良い単体テストを構成するには以下の4つの柱が存在する
- 退行に対する保護
- リファクタリングへの耐性
- 迅速なフィードバック
- 保守のしやすさ

退行に対する保護は、テストの際にどのくらいプロダクションコードが実行されているかが重要。またビジネスロジックが特に重要であり、ビジネスロジックが含まれていないようなボイラーテンプレートコードのテストは不要。なので無理にカバレッジを重要視する必要はないというのはテストも保守が必要になる中で効果の低いテストを記述しても保守コストが高くなるだけということだと理解した。

当たり前だが、テストが実装の詳細（内部処理の流れや利用しているクラスのようなホワイトボックステスト的なもの）を見ていた場合は少し実装を変えるだけで振る舞いが正しくてもテストが落ちることがある。それが偽物のアラートと言われている。それを防ぐためにもテストでは実行結果を確認することでリファクタリングへの耐性をつけよう。

## モックの利用とテストの壊れやすさ
テストダブルやモックをあまり理解していなかったが、どうやらテストダブルという概念の中にいろんな種類のものが存在しているよう。そもそもテストダブルはテストでしか使われない偽りの依存するとして表現される全てのものを包括的に意味する。
これまで、モックは他のオブジェクトの実装に依存しないテストを作るために依存しているオブジェクトの関数がテストに都合のいい固定値を返却してくれるようにするものだと思ってた。
本書では、モックはメール送信などの外部に向かうコミュニケーションで模倣と検証を行うのに対して、スタブは自分がモックだと思っていた依存からデータを取得するためにテスト対象システムが依存を呼び出すことを指しており、模倣だけしか行わない。

